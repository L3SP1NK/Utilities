#!/bin/bash
## Change the brightness of multiple monitor.

RESET_COLOR="\e[0m"
RED="\e[31m"

## Display:
DISPLAY_1="$(xrandr | grep 'connected' | cut -d ' ' -f 1 | head -n 2 | sed -n '1p')"
DISPLAY_2="$(xrandr | grep 'connected' | cut -d ' ' -f 1 | head -n 2 | sed -n '2p')"

if [[ ${1} && ${1} != "0" && ${1} != "0." && ${1} != "0.0" ]]
	then
		killall redshift ## You can't change the brightness this way when redshift is active...
		killall redshift ## There are often 2 instance running.
		xrandr --output ${DISPLAY_1} --brightness ${1} --output ${DISPLAY_2} --brightness ${1}
		redshift-gtk& # Relauch an instance in background, so you can exit properly without stoping redshift.
	else
		echo -e "${RED}Please, specify a brightness level... (from 0.1 to 1)\nExiting...${RESET_COLOR}"
		exit 1
fi
