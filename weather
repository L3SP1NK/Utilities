#!/bin/bash

## Get weather information for a given city.
## Data from http://wttr.in

## Colors.
RESET_COLOR="\e[0m"
BOLD="\e[1m"
RED="\e[31m"

CITY=${1}

function WEATHER_INFO_1()
{
	reset
	echo -e "\e[36m\e[1m$(date +%H:%M:%S)\e[0m"
	curl -sf "http://wttr.in/${CITY}" | grep -v "Follow"
	read
}

function WEATHER_INFO_2()
{
	reset
	echo -e "\e[36m\e[1m$(date +%H:%M:%S)\e[0m"
	curl -sf "http://wttr.in/${CITY}?format=v2" | grep -v "Follow"
	read
}

REQUIREMENTS="curl xterm"

which ${REQUIREMENTS} > /dev/null
if [[ ${?} -eq "0" ]]
	then
		WEATHER_INFO_1
		WEATHER_INFO_2
	else
		echo -e "${RED}To run this program, you need the following package(s) installed: ${BOLD}${REQUIREMENTS}${RESET_COLOR}"
fi
